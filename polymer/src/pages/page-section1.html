<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">

<link rel="import" href="../app-elements/page-header/page-header.html">
<link rel="import" href="../app-elements/page-elements/page-with-sidebar.html">
<link rel="import" href="../app-elements/page-elements/simple-page.html">

<link rel="import" href="../../styles/page-layout-styles.html">
<link rel="import" href="../../styles/shared-styles.html">

<dom-module id="page-section1">

  <template>

    <style include="page-layout-styles shared-styles">

    :host {
      display: block;
    }

    </style>

    <app-route
        route="{{route}}"
        pattern="/:tab"
        data="{{routeData}}"
        active="{{tabsActive}}"></app-route>

    <app-route
        route="{{route}}"
        pattern="/tab1"
        active="{{tab1Active}}"></app-route>

    <app-route
        route="{{route}}"
        pattern="/tab2"
        active="{{tab2Active}}"></app-route>

    <app-header-layout>

      <app-header id="header" fixed shadow>

        <page-header title$="Page section 1 - [[routeData.tab]]"></page-header>

        <div id="tabsWrapper" hidden$="{{!tabsActive}}">
          <app-toolbar id="tabs">

            <paper-tabs selected="[[routeData.tab]]" attr-for-selected="name" fallback-selection="tab1" noink bottom-item>
              <paper-tab name="tab1" link>
                <a href="/section1/tab1" class="tab-link" tabindex="-1">tab 1</a>
              </paper-tab>

              <paper-tab name="tab2" link>
                <a href="/section1/tab2" class="tab-link" tabindex="-1">tab 2</a>
              </paper-tab>
            </paper-tabs>

          </app-toolbar>
        </div>

      </app-header>

      <iron-pages id="categoryPages"
                  selected="{{routeData.tab}}"
                  attr-for-selected="name"
                  fallback-selection="tab1"
                  role="main">

        <div class="page" name="tab1">
          <page-with-sidebar></page-with-sidebar>
        </div>
        <div class="page" name="tab2">
          <simple-page></simple-page>
        </div>
      </iron-pages>

    </app-header-layout>

  </template>

  <script>

    Polymer({

      is: 'page-section1',

      properties: {},

      observers: [
        '_tabChanged(routeData.tab)'
      ],

      _tabChanged: function(tab) {
        var tabs = ['tab1', 'tab2'];
        if (tabs.indexOf(tab) === -1) {
          this.fire('404');
        }
      }

    });

  </script>

</dom-module>
