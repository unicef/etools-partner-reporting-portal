<link rel="import" href="../redux.html">
<link rel="import" href="../../constants.html">

<script>
  (function () {
    'use strict';

    App.Reducers = App.Reducers || {};

    App.Reducers.ResponsePlans = Redux.combineReducers({
      all: allResponsePlansReducer,
      current: currentResponsePlanReducer,
      currentID: currentResponsePlanIdReducer,
    });

    function allResponsePlansReducer(state, action) {
      if (typeof state === 'undefined') {
        state = [];
      }

      switch (action.type) {
        case App.Constants.SET_RESPONSE_PLANS:
          return action.plans;

        case App.Constants.RESET:
          return [];

        default:
          return state;
      }
    }

    function currentResponsePlanIdReducer(state, action) {
      // Setting plan and plan ID separately to avoid type issues.
      if (typeof state === 'undefined') {
        state = '';
      }

      switch (action.type) {
        // Setting plan and plan ID separately to avoid type issues.
        case App.Constants.SET_CURRENT_RESPONSE_PLAN_ID:
          return action.planID;

        case App.Constants.RESET:
          return '';

        default:
          return state;
      }
    }

    function currentResponsePlanReducer(state, action) {
      if (typeof state === 'undefined') {
        state = null;
      }

      switch (action.type) {
        case App.Constants.SET_CURRENT_RESPONSE_PLAN:
          return action.plan;

        case App.Constants.RESET:
          return null;

        default:
          return state;
      }
    }
  }());
</script>
