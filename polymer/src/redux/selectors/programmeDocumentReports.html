<link rel="import" href="../reselect.html">

<script>
  (function () {
    'use strict';

    App.Selectors = App.Selectors || {};

    App.Selectors.ProgrammeDocumentReports = {
      all: Reselect.createSelector(
        function (state) {
          return state.programmeDocumentReports.byPD;
        },
        function (state) {
           return state.programmeDocuments.current;
        },
        function (byPD, pdId) {
          return byPD[pdId];
        }
      ),

      count: Reselect.createSelector(
        function (state) {
          return state.programmeDocumentReports.countByPD;
        },
         function (state) {
           return state.programmeDocuments.current;
        },
        function (countByPD, pdId) {
          return countByPD[pdId];
        }
      ),

      current: Reselect.createSelector(
        function (state) {
          return state.programmeDocumentReports.byPD;
        },
        function (state) {
          return state.programmeDocuments.current;
        },
        function (state) {
          return state.programmeDocumentReports.current.id;
        },
        function (byPD, pdId, reportId) {
          return (byPD[pdId] || []).filter(function (report) {
            return Number(report.id) === Number(reportId);
          })[0] || {};
        }
      ),
    };
  }());
</script>
